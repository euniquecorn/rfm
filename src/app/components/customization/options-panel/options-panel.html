<div class="options-panel">
  <!-- Shirt Options -->
  <div class="options-section">
    <h3>Shirt Options</h3>
    
    <!-- Color Selection -->
    <div class="color-selection">
      <div class="color-grid">
        <button 
          *ngFor="let color of shirtColors()" 
          class="color-option"
          [class.selected]="color.isSelected"
          [style.background-color]="color.value"
          [title]="color.name"
          (click)="selectColor(color)">
        </button>
      </div>
    </div>
    
    <!-- Size Selection -->
    <div class="size-section">
      <h4>Size</h4>
      <select class="size-dropdown" [value]="getSelectedSizeId()" (change)="onSizeChange($event)">
        <option *ngFor="let size of sizes()" [value]="size.id">{{ size.label }}</option>
      </select>
    </div>
  </div>
  
  <!-- Text Options -->
  <div class="options-section">
    <h3>Text Options</h3>
    
    <!-- Font Family -->
    <div class="text-control">
      <label class="control-label">Font Family</label>
      <select class="text-dropdown"
              [value]="textOptions().fontFamily"
              (change)="updateTextStyle('fontFamily', $any($event).target.value)">
        <option *ngFor="let font of fontFamilies" [value]="font">{{ font }}</option>
      </select>
    </div>
    
    <!-- Font Size -->
    <div class="text-control">
      <label class="control-label">Font Size ({{ textOptions().fontSize }}px)</label>
      <div class="font-size-controls">
        <button class="size-btn" (click)="decreaseFontSize()">-</button>
        <input type="range"
               min="8"
               max="72"
               [value]="textOptions().fontSize"
               (input)="updateFontSize(+$any($event).target.value)"
               class="size-slider">
        <button class="size-btn" (click)="increaseFontSize()">+</button>
      </div>
    </div>
    
    <!-- Text Styling -->
    <div class="text-control">
      <label class="control-label">Text Style</label>
      <div class="text-styling">
        <button class="style-btn"
                [class.active]="textOptions().isBold"
                (click)="toggleTextStyle('isBold')"
                title="Bold">
          <strong>B</strong>
        </button>
        <button class="style-btn"
                [class.active]="textOptions().isItalic"
                (click)="toggleTextStyle('isItalic')"
                title="Italic">
          <em>I</em>
        </button>
        <button class="style-btn"
                [class.active]="textOptions().isUnderline"
                (click)="toggleTextStyle('isUnderline')"
                title="Underline">
          <u>U</u>
        </button>
      </div>
    </div>
    
    <!-- Text Colors -->
    <div class="text-control">
      <label class="control-label">Text Color</label>
      <div class="text-colors">
        <button
          *ngFor="let color of textColors"
          class="text-color-option"
          [class.selected]="textOptions().color === color"
          [style.background-color]="color"
          [title]="color"
          (click)="updateTextStyle('color', color)">
        </button>
        <input type="color"
               class="color-picker"
               [value]="textOptions().color"
               (change)="updateTextStyle('color', $any($event).target.value)"
               title="Custom color">
      </div>
    </div>
    
    <!-- Letter Spacing -->
    <div class="text-control">
      <label class="control-label">Letter Spacing</label>
      <div class="spacing-options">
        <button
          *ngFor="let spacing of letterSpacingOptions"
          class="spacing-btn"
          [class.active]="textOptions().letterSpacing === spacing.value"
          (click)="updateTextStyle('letterSpacing', spacing.value)"
          [title]="spacing.label">
          {{ spacing.label }}
        </button>
      </div>
    </div>
  </div>
  
  <!-- Image Options -->
  <div class="options-section">
    <h3>Image Options</h3>
    <div class="image-controls">
      <button
        *ngFor="let control of imageControls"
        class="image-control-btn"
        [class.active]="control.action === 'lock' && lockAspectRatio()"
        [title]="control.label"
        (click)="onImageControlClick(control.action)">
        {{ control.icon }}
      </button>
    </div>
  </div>
  
  <!-- Dynamic Price Calculator -->
  <div class="price-section">
    <h3>Dynamic Price Calculator</h3>
    
    <div class="price-details">
      <div class="price-row">
        <span class="price-label">₱{{ basePrice.toFixed(2) }}</span>
      </div>
      
      <div class="quantity-section">
        <label class="quantity-label">Based on quantity</label>
        <div class="quantity-controls">
          <button class="qty-btn" (click)="updateQuantity(quantity() - 1)">-</button>
          <span class="quantity">{{ quantity() }}</span>
          <button class="qty-btn" (click)="updateQuantity(quantity() + 1)">+</button>
        </div>
        <span class="discount-info">{{ (discount() * 100).toFixed(0) }}% off</span>
      </div>
      
      <div class="compatibility-info">
        <small>Auchie icompatibility</small>
      </div>
    </div>
    
    <div class="final-price">
      <div class="total-calculation" *ngIf="calculatedPrice()">
        <div class="price-breakdown">
          <div class="price-item">
            <span>Base Price:</span>
            <span>₱{{ calculatedPrice()!.basePrice.toFixed(2) }}</span>
          </div>
          <div class="price-item">
            <span>Quantity:</span>
            <span>{{ calculatedPrice()!.quantity }}</span>
          </div>
          <div class="price-item" *ngIf="calculatedPrice()!.discount > 0">
            <span>Discount:</span>
            <span>-{{ (calculatedPrice()!.discount * 100).toFixed(0) }}%</span>
          </div>
          <div class="price-item total">
            <span>Total:</span>
            <span>₱{{ calculatedPrice()!.finalPrice.toFixed(2) }}</span>
          </div>
        </div>
      </div>
      <div class="shipping-center">
        <span class="shipping-label">Shipping center</span>
        <span class="shipping-price">₱100.00</span>
      </div>
    </div>
  </div>
</div>